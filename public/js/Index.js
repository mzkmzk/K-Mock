!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("K_Mock",[],e):"object"==typeof exports?exports.K_Mock=e():t.K_Mock=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(3)},function(t,e){"use strict";var n={};n.extend=function(){var t,e,o,r,s,i=arguments[0]||{},a=1,u=arguments.length;for(1===u&&(i=this,a=0);a<u;a++)if(t=arguments[a])for(e in t)o=i[e],r=t[e],i!==r&&void 0!==r&&(n.isArray(r)||n.isObject(r)?(n.isArray(r)&&(s=o&&n.isArray(o)?o:[]),n.isObject(r)&&(s=o&&n.isObject(o)?o:{}),i[e]=n.extend(s,r)):i[e]=r);return i},n.each=function(t,e,n){var o,r;if("number"===this.type(t))for(o=0;o<t;o++)e(o,o);else if(t.length===+t.length)for(o=0;o<t.length&&e.call(n,t[o],o,t)!==!1;o++);else for(r in t)if(e.call(n,t[r],r,t)===!1)break},n.type=function(t){return null===t||void 0===t?String(t):Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1].toLowerCase()},n.each("String Object Array RegExp Function".split(" "),function(t){n["is"+t]=function(e){return n.type(e)===t.toLowerCase()}}),n.isObjectOrArray=function(t){return n.isObject(t)||n.isArray(t)},n.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},n.values=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},n.heredoc=function(t){return t.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},n.noop=function(){},n.find_mocked_item=function(t,e){function o(t,e){return"string"===n.type(t)?e.indexOf(t)!==-1:"regexp"===n.type(t)?t.test(e):void 0}for(var r in e){var s=e[r];if(!s.rurl||o(s.rurl,t.url))return s}},t.exports=n},function(t,e,n){"use strict";function o(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}function r(){function t(){try{return new window._XMLHttpRequest}catch(t){}}function e(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}var n=function(){var t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,e=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,n=location.href,o=e.exec(n.toLowerCase())||[];return t.test(o[1])}();return window.ActiveXObject?!n&&t()||e():t()}function s(t,e){return t.template}var i=n(1);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch(t){window.Event=function(t,e,n,o){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e,n,o),r}}var a={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u="readystatechange loadstart progress abort error load timeout loadend".split(" "),c="timeout withCredentials".split(" "),d="readyState responseURL status statusText responseType response responseText responseXML".split(" "),p={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};o._settings={timeout:"10-100"},o.setup=function(t){return i.extend(o._settings,t),o._settings},i.extend(o,a),i.extend(o.prototype,a),o.prototype.mock=!0,o.prototype.match=!1,i.extend(o.prototype,{open:function(t,e,n,s,a){function p(t){for(var e=0;e<d.length;e++)try{h[d[e]]=l[d[e]]}catch(t){}h.dispatchEvent(new Event(t.type))}var h=this;i.extend(this.custom,{method:t,url:e,async:"boolean"!=typeof n||n,username:s,password:a,options:{url:e,type:t}}),this.custom.timeout=function(t){if("number"==typeof t)return t;if("string"==typeof t&&!~t.indexOf("-"))return parseInt(t,10);if("string"==typeof t&&~t.indexOf("-")){var e=t.split("-"),n=parseInt(e[0],10),o=parseInt(e[1],10);return Math.round(Math.random()*(o-n))+n}}(o._settings.timeout);var f=i.find_mocked_item(this.custom.options,o.Mock._mocked);if(f)this.match=!0,this.custom.template=f,this.readyState=o.OPENED,this.dispatchEvent(new Event("readystatechange")),"error"===f.status&&this.abort();else{var l=r();this.custom.xhr=l;for(var v=0;v<u.length;v++)l.addEventListener(u[v],p);s?l.open(t,e,n,s,a):l.open(t,e,n);for(var m=0;m<c.length;m++)try{l[c[m]]=h[c[m]]}catch(t){}}},setRequestHeader:function(t,e){if(!this.match)return void this.custom.xhr.setRequestHeader(t,e);var n=this.custom.requestHeaders;n[t]?n[t]+=","+e:n[t]=e},timeout:0,withCredentials:!1,upload:{},send:function(t){function e(){n.readyState=o.HEADERS_RECEIVED,n.dispatchEvent(new Event("readystatechange")),n.readyState=o.LOADING,n.dispatchEvent(new Event("readystatechange")),n.status=200,n.statusText=p[200],n.response=n.responseText=JSON.stringify(s(n.custom.template,n.custom.options),null,4),n.readyState=o.DONE,n.dispatchEvent(new Event("readystatechange")),n.dispatchEvent(new Event("load")),n.dispatchEvent(new Event("loadend"))}var n=this;return this.custom.options.body=t,this.match?(this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),void(this.custom.async?setTimeout(e,this.custom.timeout):e())):void this.custom.xhr.send(t)},abort:function(){return this.match?(this.readyState=o.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),void this.dispatchEvent(new Event("error",!1,!1,this))):void this.custom.xhr.abort()}}),i.extend(o.prototype,{responseURL:"",status:o.UNSENT,statusText:"",getResponseHeader:function(t){return this.match?this.custom.responseHeaders[t.toLowerCase()]:this.custom.xhr.getResponseHeader(t)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var t=this.custom.responseHeaders,e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+": "+t[n]+"\r\n");return e},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),i.extend(o.prototype,{addEventListener:function(t,e){var n=this.custom.events;n[t]||(n[t]=[]),n[t].push(e)},removeEventListener:function(t,e){for(var n=this.custom.events[t]||[],o=0;o<n.length;o++)n[o]===e&&n.splice(o--,1)},dispatchEvent:function(t){for(var e=this.custom.events[t.type]||[],n=0;n<e.length;n++)e[n].call(this,t);var o="on"+t.type;this[o]&&this[o](t)}}),t.exports=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t){document.addEventListener("load",function(e){var n,o;e&&e.path&&e.path[0]&&e.path[0].src&&(n=e.path[0].src.match(/callback=(\w+)/))&&"string"==typeof n[1]&&window[n[1]]&&(o=i.default.find_mocked_item({url:e.path[0].src},t.Mock._mocked))&&window[n[1]].apply(null,[o.template])},!0)}var s=n(1),i=o(s),a=n(2),u=o(a),c=function(t){return location.search.indexOf("debug=true")===-1?this:(this.real=!0,t=this.init_ajax(t),void this.init(t))};c.prototype.init=function(t){i.default.each(t,function(t){t.init&&t.init.call(null)})},c.prototype.init_ajax=function(t){return t.Ajax&&t.Ajax.data&&(u.default.Mock={_mocked:{}},t.Ajax.init=function(){window.XMLHttpRequest=u.default,r(u.default),i.default.each(t.Ajax.data,function(t,e){u.default.Mock._mocked[e]={rurl:e,template:t.success,status:t.status}})}),t},t.exports=c}])});